"use strict";(()=>{var e={};e.id=152,e.ids=[152],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7165:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>X,patchFetch:()=>q,requestAsyncStorage:()=>F,routeModule:()=>x,serverHooks:()=>R,staticGenerationAsyncStorage:()=>B});var r={};a.r(r),a.d(r,{POST:()=>I});var s=a(9303),n=a(8716),i=a(3131),o=a(7070),l=a(2630);let c=Symbol.for("constructDateFrom");function u(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&c in e?e[c](t):e instanceof Date?new e.constructor(t):new Date(t)}function m(e,t){return u(t||e,e)}function p(e){let t=m(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function h(e,t){let a=m(e,t?.in);return a.setHours(0,0,0,0),a}function d(e,t,a){let[r,s]=function(e,...t){let a=u.bind(null,e||t.find(e=>"object"==typeof e));return t.map(a)}(a?.in,e,t),n=h(r),i=h(s);return Math.round((+n-p(n)-(+i-p(i)))/864e5)}function g(e,t){let a,r;let s=()=>u(t?.in,NaN),n=t?.additionalDigits??2,i=function(e){let t;let a={},r=e.split(f.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],f.timeZoneDelimiter.test(a.date)&&(a.date=e.split(f.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){let e=f.timezone.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}(e);if(i.date){let e=function(e,t){let a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:null===n?s:100*n,restDateString:e.slice((r[1]||r[2]).length)}}(i.date,n);a=function(e,t){if(null===t)return new Date(NaN);let a=e.match(b);if(!a)return new Date(NaN);let r=!!a[4],s=v(a[1]),n=v(a[2])-1,i=v(a[3]),o=v(a[4]),l=v(a[5])-1;if(r)return o>=1&&o<=53&&l>=0&&l<=6?function(e,t,a){let r=new Date(0);r.setUTCFullYear(e,0,4);let s=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((t-1)*7+a+1-s)),r}(t,o,l):new Date(NaN);{let e=new Date(0);return n>=0&&n<=11&&i>=1&&i<=(D[n]||(y(t)?29:28))&&s>=1&&s<=(y(t)?366:365)?(e.setUTCFullYear(t,n,Math.max(s,i)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return s();let o=+a,l=0;if(i.time&&isNaN(l=function(e){let t=e.match(w);if(!t)return NaN;let a=A(t[1]),r=A(t[2]),s=A(t[3]);return(24===a?0===r&&0===s:s>=0&&s<60&&r>=0&&r<60&&a>=0&&a<25)?36e5*a+6e4*r+1e3*s:NaN}(i.time)))return s();if(i.timezone){if(isNaN(r=function(e){if("Z"===e)return 0;let t=e.match(M);if(!t)return 0;let a="+"===t[1]?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return s>=0&&s<=59?a*(36e5*r+6e4*s):NaN}(i.timezone)))return s()}else{let e=new Date(o+l),a=m(0,t?.in);return a.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),a.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),a}return m(o+l+r,t?.in)}let f={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},b=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,w=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,M=/^([+-])(\d{2})(?::?(\d{2}))?$/;function v(e){return e?parseInt(e):1}function A(e){return e&&parseFloat(e.replace(",","."))||0}let D=[31,null,31,30,31,30,31,31,30,31,30,31];function y(e){return e%400==0||e%4==0&&e%100!=0}function P(e,t){let a=m(e,t?.in).getDay();return 0===a||6===a}let N=["AM","08","09","10","11"],C=e=>{let t=e.seatMap.reduce((e,t)=>e+t.seats.length,0);return(t-e.seatMap.map(e=>e.seats.filter(e=>"reserved"===e.status).length).reduce((e,t)=>e+t,0))/t*100},T=(e,t)=>{let a=t.includes("PM")&&!t.startsWith("12"),r=Math.abs(d(new Date,g(e.releaseDate)));return e.trendScore>90&&a&&r<=5?"high":e.trendScore>80&&(a||r<=10)?"medium":"low"},k=e=>`$${Math.max(e-2,8).toFixed(2)} - $${(e+(e>15?3:2)).toFixed(2)}`,S=e=>N.some(t=>e.toUpperCase().includes(t))||/(?:0[6-9]|1[0-1]):\d{2}/.test(e),U={cheap:18,lessCrowd:14,closest:16,morning:12,weekend:10,group:12},E=({movie:e,preferences:t,seatsRequested:a=2})=>{let r=C(e),s=-1/0,n=null;if(e.showtimes.forEach(i=>{i.times.forEach(o=>{let l=50,c=[],u=g(i.date);if(t.includes("cheap")&&(o.price<=12?(l+=U.cheap,c.push("Morning + weekday shows have the lowest price bands.")):l-=6),t.includes("lessCrowd")&&(!P(u)&&S(o.label)?(l+=U.lessCrowd,c.push("Weekday mornings statistically carry the lightest crowd.")):l-=5),t.includes("closest")){let e=d(u,new Date);l+=Math.max(0,U.closest-4*e),c.push("Closely upcoming shows keep your plan nimble.")}t.includes("morning")&&(S(o.label)?(l+=U.morning,c.push("Morning windows reduce surge pricing and noise.")):l-=4),t.includes("weekend")?P(u)?(l+=U.weekend,c.push("Weekend slots line up with your calendar.")):l-=8:t.includes("lessCrowd")||P(u)||(l+=6),t.includes("group")&&(r>55&&a>=5?(l+=U.group,c.push("High seat pool increases the odds of finding 5 seats together.")):l-=3),e.trendScore>90&&o.label.includes("PM")&&(l-=5),l>s&&(s=l,n={bestDay:i.date,bestTime:o.label,probability:Math.min(98,Math.round((r+l)/2)),crowdScore:Math.max(25,Math.min(95,100-l+20)),priceRange:k(o.price),fastFill:T(e,o.label),reasoning:c})})}),!n)throw Error("No suggestions available.");return n};async function I(e){let t=await e.json(),a=t.movieSlug?await (0,l.N)(t.movieSlug):null;if(!a)return o.NextResponse.json({error:"Movie not found"},{status:404});let r=E({movie:a,preferences:t.preferences??[],seatsRequested:t.seatsRequested??2});return o.NextResponse.json(r)}let x=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/suggestions/route",pathname:"/api/suggestions",filename:"route",bundlePath:"app/api/suggestions/route"},resolvedPagePath:"C:\\Users\\ASUS\\OneDrive\\Desktop\\awp mini proj\\app\\api\\suggestions\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:F,staticGenerationAsyncStorage:B,serverHooks:R}=x,X="/api/suggestions/route";function q(){return(0,i.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:B})}},2630:(e,t,a)=>{a.d(t,{N:()=>h,v:()=>p});var r=a(1159);let s=(e,t=[],a=!1)=>({label:e,seats:Array.from({length:12},(r,s)=>({id:`${e}${s+1}`,row:e,number:s+1,status:t.includes(s+1)?"reserved":a?"vip":"available"}))}),n=[s("A",[3,4,5]),s("B",[1,8]),s("C"),s("D",[10,11,12],!0),s("E",[2,3],!0),s("F"),s("G",[6,7]),s("H")],i=[{id:"mv-01",slug:"transformers-rise-of-the-beasts",title:"Transformers: Rise of the Beasts",tagline:"More than meets the eye. The ultimate battle begins.",rating:"PG-13",runtime:127,releaseDate:"2023-06-09",genres:["Action","Sci-Fi","Adventure"],voteAverage:9.2,trendScore:95,synopsis:"Return to the action and spectacle of Transformers with Rise of the Beasts. When a new threat capable of destroying the entire planet emerges, Optimus Prime and the Autobots must team up with a powerful faction of Transformers known as the Maximals to save Earth. An epic battle between good and evil unfolds in this explosive adventure that pushes the boundaries of visual effects and storytelling.",poster:"https://image.tmdb.org/t/p/w500/gPbM0MK8CP8A174rmUwGsADNYKD.jpg",backdrop:"/trans.jpeg",trailerUrl:"https://www.youtube.com/embed/itnqEauWQZM",cast:[{name:"Anthony Ramos",character:"Noah Diaz",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=400&q=80"},{name:"Dominique Fishback",character:"Elena Wallace",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=400&q=80"},{name:"Peter Cullen",character:"Optimus Prime (Voice)",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=400&q=80"}],showtimes:[{date:"2025-11-15",times:[{label:"09:30 AM",price:12.5,screen:"IMAX Laser",isPremium:!0},{label:"01:00 PM",price:14.5,screen:"Dolby Atmos"},{label:"06:30 PM",price:19.5,screen:"IMAX Laser",isPremium:!0},{label:"10:15 PM",price:17.5,screen:"Neon Club"}]},{date:"2025-11-16",times:[{label:"10:15 AM",price:12,screen:"IMAX Laser",isPremium:!0},{label:"02:30 PM",price:14,screen:"Dolby Atmos"},{label:"08:00 PM",price:19.9,screen:"IMAX Laser",isPremium:!0}]},{date:"2025-11-17",times:[{label:"11:00 AM",price:11.5,screen:"Studio 4"},{label:"04:15 PM",price:14.2,screen:"Dolby Atmos"}]}],tags:["Blockbuster","IMAX","4K Ultra HD"],seatMap:n},{id:"mv-02",slug:"avengers-endgame",title:"Avengers: Endgame",tagline:"Whatever it takes. The epic conclusion to an era.",rating:"PG-13",runtime:181,releaseDate:"2019-04-26",genres:["Action","Adventure","Drama"],voteAverage:9.5,trendScore:98,synopsis:"After the devastating events of Infinity War, the universe is in ruins. With the help of remaining allies, the Avengers assemble once more in order to reverse Thanos' actions and restore balance to the universe. The epic conclusion to 22 interconnected films, Endgame delivers an emotional, action-packed finale that redefines what it means to be a hero. Experience the ultimate Marvel Cinematic Universe event in stunning 4K.",poster:"https://image.tmdb.org/t/p/w500/or06FN3Dka5tukK1e9sl16pB3iy.jpg",backdrop:"https://image.tmdb.org/t/p/w1920/7RyHsO4yDXtBv1zUU3mTpHeQ0d5.jpg",trailerUrl:"https://www.youtube.com/embed/TcMBFSGVi1c",cast:[{name:"Robert Downey Jr.",character:"Tony Stark / Iron Man",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=400&q=80"},{name:"Chris Evans",character:"Steve Rogers / Captain America",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=400&q=80"},{name:"Scarlett Johansson",character:"Natasha Romanoff / Black Widow",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=400&q=80"}],showtimes:[{date:"2025-11-15",times:[{label:"08:15 AM",price:13.5,screen:"IMAX Laser",isPremium:!0},{label:"12:30 PM",price:15.5,screen:"Dolby Atmos"},{label:"07:45 PM",price:20.2,screen:"IMAX Laser",isPremium:!0}]},{date:"2025-11-16",times:[{label:"09:00 AM",price:13,screen:"IMAX Laser",isPremium:!0},{label:"03:10 PM",price:15.5,screen:"Dolby Atmos"},{label:"09:15 PM",price:20.8,screen:"IMAX Laser",isPremium:!0}]}],tags:["Marvel","IMAX","Epic Finale"],seatMap:n},{id:"mv-03",slug:"the-dark-knight",title:"The Dark Knight",tagline:"Why so serious? The hero Gotham deserves.",rating:"PG-13",runtime:152,releaseDate:"2008-07-18",genres:["Action","Crime","Drama"],voteAverage:9.8,trendScore:99,synopsis:"When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice. With the help of allies Lt. Jim Gordon and DA Harvey Dent, Batman must set out to dismantle the remaining criminal organizations that plague the streets. A masterpiece of modern cinema, now in stunning 4K restoration.",poster:"/dark.jpg",backdrop:"/dark.jpg",trailerUrl:"https://www.youtube.com/embed/EXeTwQWrcwY",cast:[{name:"Christian Bale",character:"Bruce Wayne / Batman",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=400&q=80"},{name:"Heath Ledger",character:"The Joker",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=400&q=80"},{name:"Aaron Eckhart",character:"Harvey Dent / Two-Face",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=400&q=80"}],showtimes:[{date:"2025-11-15",times:[{label:"11:15 AM",price:14.5,screen:"IMAX Laser",isPremium:!0},{label:"04:45 PM",price:18.5,screen:"Dolby Atmos"},{label:"11:30 PM",price:17.5,screen:"Neo Midnight"}]},{date:"2025-11-16",times:[{label:"01:00 PM",price:15,screen:"IMAX Laser",isPremium:!0},{label:"09:40 PM",price:18.9,screen:"Dolby Atmos"}]},{date:"2025-11-18",times:[{label:"06:00 PM",price:16.2,screen:"IMAX Laser",isPremium:!0},{label:"10:55 PM",price:17,screen:"Neo Midnight"}]}],tags:["DC","IMAX","Classic"],seatMap:n}],o=Object.fromEntries(i.map(e=>[e.slug,e]));i.map((e,t)=>({...e,highlightColor:["from-purple-500","from-sky-400","from-pink-500"][t%3]}));var l=a(3974);let c=process.env.NEXT_PUBLIC_SUPABASE_URL||process.env.SUPABASE_URL||"",u=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||process.env.SUPABASE_ANON_KEY||"",m=c&&u?(0,l.eI)(c,u):null,p=(0,r.cache)(async()=>{if(m){let{data:e,error:t}=await m.from("movies").select("*").order("releaseDate",{ascending:!1});if(!t&&e)return e}return i}),h=(0,r.cache)(async e=>{if(m){let{data:t}=await m.from("movies").select("*").eq("slug",e).single();if(t)return t}return o[e]})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,974,972],()=>a(7165));module.exports=r})();